var drawing = false;
var canvas = document.querySelector("canvas");
var context = canvas.getContext("2d");
// var lastImageData = context.getImageData(0,0,canvas.width,canvas.height);

let scaling = 10;
let height = 100 * scaling;
let width = 120 * scaling;

context.canvas.width = width;
context.canvas.height = height;

var line0 = [
  [0, 0],
  [1, 10],
  [2, 15],
  [3, 35],
  [4, 20],
  [5, 15],
  [6, 10],
  [7, 11],
  [8, 17],
  [9, 17],
  [10, 17],
  [11, 17],
  [12, 19],
  [13, 16],
  [14, 20],
  [15, 23],
  [16, 23],
  [17, 26],
  [18, 27],
  [19, 29],
  [20, 28],
  [21, 27],
  [22, 29],
  [23, 26],
  [24, 20],
  [25, 33],
  [26, 33],
  [27, 36],
  [28, 37],
  [29, 39],
  [30, 38],
  [31, 37],
  [32, 39],
  [33, 36],
  [34, 40],
  [35, 43],
  [36, 43],
  [37, 46],
  [38, 47],
  [39, 49],
  [40, 48],
  [41, 47],
  [42, 49],
  [43, 50],
  [44, 54],
  [45, 56],
  [46, 66],
  [47, 65],
  [48, 60],
  [49, 58],
  [50, 53],
  [51, 47],
  [52, 49],
  [53, 50],
  [54, 54],
  [55, 56],
  [56, 66],
  [57, 65],
  [58, 60],
  [59, 58],
  [60, 53],
  [61, 47],
  [62, 49],
  [63, 50],
  [64, 54],
  [65, 56],
  [66, 66],
  [67, 65],
  [68, 60],
  [69, 58],
  [70, 58],
  [71, 57],
  [72, 89],
  [73, 80],
  [74, 84],
  [75, 86],
  [76, 86],
  [77, 92],
  [78, 94],
  [79, 95],
  [80, 97],
  [81, 98],
  [82, 100],
  [83, 99],
  [84, 85],
  [85, 76],
  [86, 86],
  [87, 92],
  [88, 94],
  [89, 95],
  [90, 97],
  [91, 98],
  [92, 100],
  [93, 99],
  [94, 85],
  [95, 76],
  [96, 86],
  [97, 92],
  [98, 94],
  [99, 95],
  [100, 97],
  [101, 98],
  [102, 100],
  [103, 99],
  [104, 85],
  [105, 76],
  [106, 86],
  [107, 92],
  [108, 94],
  [109, 95],
  [110, 97],
  [111, 95],
  [112, 80],
  [113, 70],
  [114, 60],
  [115, 65],
  [116, 40],
  [117, 30],
  [118, 20],
  [119, 10],
  [120, 0],
];
var line1 = [
  [0, 10],
  [1, 20],
  [2, 25],
  [3, 45],
  [4, 30],
  [5, 25],
  [6, 20],
  [7, 21],
  [8, 27],
  [9, 27],
  [10, 27],
  [11, 27],
  [12, 29],
  [13, 26],
  [14, 30],
  [15, 33],
  [16, 33],
  [17, 36],
  [18, 37],
  [19, 39],
  [20, 38],
  [21, 37],
  [22, 39],
  [23, 36],
  [24, 30],
  [25, 43],
  [26, 43],
  [27, 46],
  [28, 47],
  [29, 49],
  [30, 48],
  [31, 47],
  [32, 49],
  [33, 46],
  [34, 50],
  [35, 53],
  [36, 53],
  [37, 56],
  [38, 57],
  [39, 59],
  [40, 58],
  [41, 57],
  [42, 59],
  [43, 60],
  [44, 64],
  [45, 66],
  [46, 76],
  [47, 75],
  [48, 70],
  [49, 68],
  [50, 63],
  [51, 57],
  [52, 59],
  [53, 60],
  [54, 64],
  [55, 66],
  [56, 76],
  [57, 75],
  [58, 70],
  [59, 68],
  [60, 63],
  [61, 57],
  [62, 59],
  [63, 60],
  [64, 64],
  [65, 66],
  [66, 66],
  [67, 65],
  [68, 60],
  [69, 68],
  [70, 68],
  [71, 67],
  [72, 99],
  [73, 90],
  [74, 94],
  [75, 96],
  [76, 96],
  [77, 82],
  [78, 84],
  [79, 85],
  [80, 87],
  [81, 88],
  [82, 90],
  [83, 89],
  [84, 75],
  [85, 66],
  [86, 76],
  [87, 82],
  [88, 84],
  [89, 85],
  [90, 87],
  [91, 88],
  [92, 90],
  [93, 89],
  [94, 75],
  [95, 66],
  [96, 76],
  [97, 82],
  [98, 84],
  [99, 85],
  [100, 87],
  [101, 88],
  [102, 90],
  [103, 89],
  [104, 75],
  [105, 66],
  [106, 76],
  [107, 82],
  [108, 84],
  [109, 85],
  [110, 87],
  [111, 85],
  [112, 70],
  [113, 60],
  [114, 50],
  [115, 45],
  [116, 30],
  [117, 20],
  [118, 10],
  [119, 10],
  [120, 10],
];
var line2 = [
  [0, 90],
  [1, 80],
  [2, 75],
  [3, 55],
  [4, 70],
  [5, 75],
  [6, 80],
  [7, 79],
  [8, 73],
  [9, 73],
  [10, 73],
  [11, 73],
  [12, 71],
  [13, 74],
  [14, 70],
  [15, 67],
  [16, 67],
  [17, 64],
  [18, 63],
  [19, 61],
  [20, 62],
  [21, 63],
  [22, 61],
  [23, 64],
  [24, 70],
  [25, 57],
  [26, 57],
  [27, 54],
  [28, 53],
  [29, 51],
  [30, 52],
  [31, 53],
  [32, 51],
  [33, 54],
  [34, 50],
  [35, 47],
  [36, 47],
  [37, 44],
  [38, 43],
  [39, 41],
  [40, 42],
  [41, 43],
  [42, 41],
  [43, 40],
  [44, 36],
  [45, 34],
  [46, 24],
  [47, 25],
  [48, 30],
  [49, 32],
  [50, 37],
  [51, 43],
  [52, 41],
  [53, 40],
  [54, 36],
  [55, 34],
  [56, 24],
  [57, 25],
  [58, 30],
  [59, 32],
  [60, 37],
  [61, 43],
  [62, 41],
  [63, 40],
  [64, 36],
  [65, 34],
  [66, 34],
  [67, 35],
  [68, 40],
  [69, 32],
  [70, 32],
  [71, 33],
  [72, 1],
  [73, 10],
  [74, 6],
  [75, 4],
  [76, 4],
  [77, 18],
  [78, 16],
  [79, 15],
  [80, 13],
  [81, 12],
  [82, 10],
  [83, 11],
  [84, 25],
  [85, 34],
  [86, 24],
  [87, 18],
  [88, 16],
  [89, 15],
  [90, 13],
  [91, 12],
  [92, 10],
  [93, 11],
  [94, 25],
  [95, 34],
  [96, 24],
  [97, 18],
  [98, 16],
  [99, 15],
  [100, 13],
  [101, 12],
  [102, 10],
  [103, 11],
  [104, 25],
  [105, 34],
  [106, 24],
  [107, 18],
  [108, 16],
  [109, 15],
  [110, 13],
  [111, 15],
  [112, 30],
  [113, 40],
  [114, 50],
  [115, 55],
  [116, 70],
  [117, 80],
  [118, 90],
  [119, 90],
  [120, 90],
];
var line3 = [
  [0, 17],
  [1, 27],
  [2, 32],
  [3, 52],
  [4, 37],
  [5, 32],
  [6, 27],
  [7, 28],
  [8, 34],
  [9, 34],
  [10, 34],
  [11, 34],
  [12, 36],
  [13, 33],
  [14, 37],
  [15, 40],
  [16, 40],
  [17, 43],
  [18, 44],
  [19, 46],
  [20, 45],
  [21, 44],
  [22, 46],
  [23, 43],
  [24, 37],
  [25, 50],
  [26, 50],
  [27, 53],
  [28, 54],
  [29, 56],
  [30, 55],
  [31, 54],
  [32, 56],
  [33, 53],
  [34, 57],
  [35, 60],
  [36, 60],
  [37, 63],
  [38, 64],
  [39, 66],
  [40, 65],
  [41, 64],
  [42, 66],
  [43, 67],
  [44, 71],
  [45, 73],
  [46, 83],
  [47, 82],
  [48, 77],
  [49, 75],
  [50, 70],
  [51, 64],
  [52, 66],
  [53, 67],
  [54, 71],
  [55, 73],
  [56, 83],
  [57, 82],
  [58, 77],
  [59, 75],
  [60, 70],
  [61, 64],
  [62, 66],
  [63, 67],
  [64, 71],
  [65, 73],
  [66, 73],
  [67, 72],
  [68, 67],
  [69, 75],
  [70, 75],
  [71, 74],
  [72, 96],
  [73, 97],
  [74, 91],
  [75, 93],
  [76, 93],
  [77, 89],
  [78, 91],
  [79, 92],
  [80, 94],
  [81, 95],
  [82, 97],
  [83, 96],
  [84, 82],
  [85, 73],
  [86, 83],
  [87, 89],
  [88, 91],
  [89, 92],
  [90, 94],
  [91, 95],
  [92, 97],
  [93, 96],
  [94, 82],
  [95, 73],
  [96, 83],
  [97, 89],
  [98, 91],
  [99, 92],
  [100, 94],
  [101, 95],
  [102, 97],
  [103, 96],
  [104, 82],
  [105, 73],
  [106, 83],
  [107, 89],
  [108, 91],
  [109, 92],
  [110, 94],
  [111, 92],
  [112, 77],
  [113, 67],
  [114, 57],
  [115, 52],
  [116, 37],
  [117, 27],
  [118, 17],
  [119, 17],
  [120, 17],
];
var line4 = [
  [0, 83],
  [1, 73],
  [2, 68],
  [3, 48],
  [4, 63],
  [5, 68],
  [6, 73],
  [7, 72],
  [8, 66],
  [9, 66],
  [10, 66],
  [11, 66],
  [12, 64],
  [13, 67],
  [14, 63],
  [15, 60],
  [16, 60],
  [17, 57],
  [18, 56],
  [19, 54],
  [20, 55],
  [21, 56],
  [22, 54],
  [23, 57],
  [24, 63],
  [25, 50],
  [26, 50],
  [27, 47],
  [28, 46],
  [29, 44],
  [30, 45],
  [31, 46],
  [32, 44],
  [33, 47],
  [34, 43],
  [35, 40],
  [36, 40],
  [37, 37],
  [38, 36],
  [39, 34],
  [40, 35],
  [41, 36],
  [42, 34],
  [43, 33],
  [44, 29],
  [45, 27],
  [46, 17],
  [47, 18],
  [48, 23],
  [49, 25],
  [50, 30],
  [51, 36],
  [52, 34],
  [53, 33],
  [54, 29],
  [55, 27],
  [56, 17],
  [57, 18],
  [58, 23],
  [59, 25],
  [60, 30],
  [61, 36],
  [62, 34],
  [63, 33],
  [64, 29],
  [65, 27],
  [66, 27],
  [67, 28],
  [68, 33],
  [69, 25],
  [70, 25],
  [71, 26],
  [72, 4],
  [73, 3],
  [74, 9],
  [75, 7],
  [76, 7],
  [77, 11],
  [78, 9],
  [79, 8],
  [80, 6],
  [81, 5],
  [82, 3],
  [83, 4],
  [84, 18],
  [85, 27],
  [86, 17],
  [87, 11],
  [88, 9],
  [89, 8],
  [90, 6],
  [91, 5],
  [92, 3],
  [93, 4],
  [94, 18],
  [95, 27],
  [96, 17],
  [97, 11],
  [98, 9],
  [99, 8],
  [100, 6],
  [101, 5],
  [102, 3],
  [103, 4],
  [104, 18],
  [105, 27],
  [106, 17],
  [107, 11],
  [108, 9],
  [109, 8],
  [110, 6],
  [111, 8],
  [112, 23],
  [113, 33],
  [114, 43],
  [115, 48],
  [116, 63],
  [117, 73],
  [118, 83],
  [119, 83],
  [120, 83],
];
var line5 = [
  [0, 82],
  [1, 74],
  [2, 62],
  [3, 59],
  [4, 69],
  [5, 74],
  [6, 76],
  [7, 73],
  [8, 70],
  [9, 70],
  [10, 70],
  [11, 69],
  [12, 69],
  [13, 69],
  [14, 65],
  [15, 64],
  [16, 62],
  [17, 60],
  [18, 59],
  [19, 58],
  [20, 59],
  [21, 59],
  [22, 59],
  [23, 64],
  [24, 60],
  [25, 54],
  [26, 52],
  [27, 50],
  [28, 49],
  [29, 48],
  [30, 49],
  [31, 49],
  [32, 49],
  [33, 49],
  [34, 45],
  [35, 44],
  [36, 42],
  [37, 40],
  [38, 39],
  [39, 38],
  [40, 39],
  [41, 39],
  [42, 37],
  [43, 35],
  [44, 32],
  [45, 26],
  [46, 21],
  [47, 24],
  [48, 28],
  [49, 31],
  [50, 37],
  [51, 39],
  [52, 37],
  [53, 35],
  [54, 32],
  [55, 26],
  [56, 21],
  [57, 24],
  [58, 28],
  [59, 31],
  [60, 37],
  [61, 39],
  [62, 37],
  [63, 35],
  [64, 32],
  [65, 31],
  [66, 31],
  [67, 34],
  [68, 33],
  [69, 29],
  [70, 29],
  [71, 19],
  [72, 2],
  [73, 10],
  [74, 7],
  [75, 6],
  [76, 8],
  [77, 14],
  [78, 12],
  [79, 11],
  [80, 9],
  [81, 8],
  [82, 7],
  [83, 15],
  [84, 26],
  [85, 26],
  [86, 18],
  [87, 14],
  [88, 12],
  [89, 11],
  [90, 9],
  [91, 8],
  [92, 7],
  [93, 15],
  [94, 26],
  [95, 26],
  [96, 18],
  [97, 14],
  [98, 12],
  [99, 11],
  [100, 9],
  [101, 8],
  [102, 7],
  [103, 15],
  [104, 26],
  [105, 26],
  [106, 18],
  [107, 14],
  [108, 12],
  [109, 11],
  [110, 11],
  [111, 19],
  [112, 32],
  [113, 42],
  [114, 49],
  [115, 59],
  [116, 72],
  [117, 82],
  [118, 87],
  [119, 87],
  [120, 45],
];
var line6 = [
  [0, 13],
  [1, 23],
  [2, 28],
  [3, 48],
  [4, 33],
  [5, 28],
  [6, 23],
  [7, 24],
  [8, 30],
  [9, 30],
  [10, 30],
  [11, 30],
  [12, 32],
  [13, 29],
  [14, 33],
  [15, 36],
  [16, 36],
  [17, 39],
  [18, 40],
  [19, 42],
  [20, 41],
  [21, 40],
  [22, 42],
  [23, 39],
  [24, 33],
  [25, 46],
  [26, 46],
  [27, 49],
  [28, 50],
  [29, 52],
  [30, 51],
  [31, 50],
  [32, 52],
  [33, 49],
  [34, 53],
  [35, 56],
  [36, 56],
  [37, 59],
  [38, 60],
  [39, 62],
  [40, 61],
  [41, 60],
  [42, 62],
  [43, 63],
  [44, 67],
  [45, 69],
  [46, 79],
  [47, 78],
  [48, 73],
  [49, 71],
  [50, 66],
  [51, 60],
  [52, 62],
  [53, 63],
  [54, 67],
  [55, 69],
  [56, 79],
  [57, 78],
  [58, 73],
  [59, 71],
  [60, 66],
  [61, 60],
  [62, 62],
  [63, 63],
  [64, 67],
  [65, 69],
  [66, 69],
  [67, 68],
  [68, 63],
  [69, 71],
  [70, 71],
  [71, 70],
  [72, 97],
  [73, 93],
  [74, 92],
  [75, 94],
  [76, 94],
  [77, 85],
  [78, 87],
  [79, 88],
  [80, 90],
  [81, 91],
  [82, 93],
  [83, 92],
  [84, 78],
  [85, 69],
  [86, 79],
  [87, 85],
  [88, 87],
  [89, 88],
  [90, 90],
  [91, 91],
  [92, 93],
  [93, 92],
  [94, 78],
  [95, 69],
  [96, 79],
  [97, 85],
  [98, 87],
  [99, 88],
  [100, 90],
  [101, 91],
  [102, 93],
  [103, 92],
  [104, 78],
  [105, 69],
  [106, 79],
  [107, 85],
  [108, 87],
  [109, 88],
  [110, 90],
  [111, 88],
  [112, 73],
  [113, 63],
  [114, 53],
  [115, 48],
  [116, 33],
  [117, 23],
  [118, 13],
  [119, 13],
  [120, 13],
];
var line7 = [
  [0, 61],
  [1, 59],
  [2, 52],
  [3, 57],
  [4, 59],
  [5, 60],
  [6, 60],
  [7, 58],
  [8, 58],
  [9, 58],
  [10, 58],
  [11, 58],
  [12, 58],
  [13, 57],
  [14, 56],
  [15, 56],
  [16, 55],
  [17, 55],
  [18, 54],
  [19, 54],
  [20, 55],
  [21, 54],
  [22, 55],
  [23, 57],
  [24, 53],
  [25, 53],
  [26, 52],
  [27, 51],
  [28, 51],
  [29, 51],
  [30, 51],
  [31, 51],
  [32, 52],
  [33, 51],
  [34, 49],
  [35, 50],
  [36, 48],
  [37, 48],
  [38, 48],
  [39, 48],
  [40, 48],
  [41, 48],
  [42, 47],
  [43, 46],
  [44, 45],
  [45, 42],
  [46, 42],
  [47, 44],
  [48, 45],
  [49, 46],
  [50, 48],
  [51, 48],
  [52, 47],
  [53, 46],
  [54, 45],
  [55, 42],
  [56, 42],
  [57, 44],
  [58, 45],
  [59, 46],
  [60, 48],
  [61, 48],
  [62, 47],
  [63, 46],
  [64, 45],
  [65, 45],
  [66, 45],
  [67, 47],
  [68, 45],
  [69, 45],
  [70, 45],
  [71, 38],
  [72, 34],
  [73, 39],
  [74, 35],
  [75, 35],
  [76, 37],
  [77, 39],
  [78, 39],
  [79, 38],
  [80, 38],
  [81, 37],
  [82, 37],
  [83, 42],
  [84, 45],
  [85, 42],
  [86, 40],
  [87, 39],
  [88, 39],
  [89, 38],
  [90, 38],
  [91, 37],
  [92, 37],
  [93, 42],
  [94, 45],
  [95, 42],
  [96, 40],
  [97, 39],
  [98, 39],
  [99, 38],
  [100, 38],
  [101, 37],
  [102, 37],
  [103, 42],
  [104, 45],
  [105, 42],
  [106, 40],
  [107, 39],
  [108, 39],
  [109, 38],
  [110, 39],
  [111, 44],
  [112, 47],
  [113, 51],
  [114, 52],
  [115, 57],
  [116, 61],
  [117, 64],
  [118, 64],
  [119, 64],
  [120, 36],
];
var line8 = [
  [0, 29],
  [1, 35],
  [2, 36],
  [3, 51],
  [4, 41],
  [5, 38],
  [6, 35],
  [7, 35],
  [8, 39],
  [9, 39],
  [10, 39],
  [11, 39],
  [12, 40],
  [13, 38],
  [14, 40],
  [15, 42],
  [16, 42],
  [17, 44],
  [18, 44],
  [19, 46],
  [20, 45],
  [21, 44],
  [22, 46],
  [23, 45],
  [24, 39],
  [25, 48],
  [26, 48],
  [27, 49],
  [28, 50],
  [29, 51],
  [30, 51],
  [31, 50],
  [32, 52],
  [33, 49],
  [34, 51],
  [35, 54],
  [36, 53],
  [37, 55],
  [38, 56],
  [39, 57],
  [40, 56],
  [41, 56],
  [42, 57],
  [43, 57],
  [44, 59],
  [45, 60],
  [46, 66],
  [47, 66],
  [48, 63],
  [49, 62],
  [50, 60],
  [51, 56],
  [52, 57],
  [53, 57],
  [54, 59],
  [55, 60],
  [56, 66],
  [57, 66],
  [58, 63],
  [59, 62],
  [60, 60],
  [61, 56],
  [62, 57],
  [63, 57],
  [64, 59],
  [65, 61],
  [66, 61],
  [67, 61],
  [68, 57],
  [69, 62],
  [70, 62],
  [71, 59],
  [72, 76],
  [73, 75],
  [74, 73],
  [75, 74],
  [76, 75],
  [77, 69],
  [78, 71],
  [79, 71],
  [80, 72],
  [81, 73],
  [82, 74],
  [83, 75],
  [84, 67],
  [85, 60],
  [86, 66],
  [87, 69],
  [88, 71],
  [89, 71],
  [90, 72],
  [91, 73],
  [92, 74],
  [93, 75],
  [94, 67],
  [95, 60],
  [96, 66],
  [97, 69],
  [98, 71],
  [99, 71],
  [100, 72],
  [101, 73],
  [102, 74],
  [103, 75],
  [104, 67],
  [105, 60],
  [106, 66],
  [107, 69],
  [108, 71],
  [109, 71],
  [110, 73],
  [111, 73],
  [112, 64],
  [113, 59],
  [114, 52],
  [115, 51],
  [116, 42],
  [117, 36],
  [118, 30],
  [119, 30],
  [120, 20],
];
isDrawed = [0, 0, 0, 0, 0, 0, 0, 0, 0];
lineColors = [
  "black",
  "black",
  "black",
  "black",
  "black",
  "black",
  "black",
  "black",
  "black",
];

var duration = 1;
function calcWaypoints(line) {
  var waypoints = [];
  for (var i = 1; i < line.length; i++) {
    var pt0 = line[i - 1];
    var pt1 = line[i];
    var dx = pt1[0] - pt0[0];
    var dy = pt1[1] - pt0[1];
    for (var j = 0; j < duration; j++) {
      var x = pt0[0] + (dx * j) / duration;
      var y = pt0[1] + (dy * j) / duration;
      waypoints.push([x, y]);
    }
  }
  return waypoints;
}

var points0 = calcWaypoints(line0);
var points1 = calcWaypoints(line1);
var points2 = calcWaypoints(line2);
var points3 = calcWaypoints(line3);
var points4 = calcWaypoints(line4);
var points5 = calcWaypoints(line5);
var points6 = calcWaypoints(line6);
var points7 = calcWaypoints(line7);
var points8 = calcWaypoints(line8);
var t = 1;
// animate();

// incrementally draw additional line segments along the path
function animate(points, index) {
  if (t < points.length - 1) {
    requestAnimationFrame(function (timestamp) {
      animate(points, index);
    });
  } else {
    if (drawing) {
      isDrawed[index] = 1;
      drawing = false;
    } else {
      isDrawed[index] = 0;
    }
  }
  context.beginPath();
  context.moveTo(
    points[t - 1][0] * scaling,
    height - points[t - 1][1] * scaling
  );
  context.lineTo(points[t][0] * scaling, height - points[t][1] * scaling);
  context.stroke();
  t++;
}

function drawGrid() {
  var xCount = 3;
  var yCount = 4;
  context.beginPath();
  context.lineWidth = 3;
  // context.shadowColor = "#ec4c69";
  context.shadowBlur = 0;
  context.shadowOffsetX = 0;
  context.shadowOffsetY = 0;
  context.strokeStyle = "#515054";
  for (let index = 0; index < yCount + 2; index++) {
    context.moveTo(0, height - (index * height) / (yCount + 1));
    context.lineTo(width * scaling, height - (index * height) / (yCount + 1));
  }
  for (let index = 0; index < xCount + 2; index++) {
    context.moveTo((index * width) / (xCount + 1), 0);
    context.lineTo((index * width) / (xCount + 1), height);
  }
  context.stroke();
  context.closePath();
}

function reDrawLine(item, index) {
  if (item.classList.contains("active")) {
    drawing = true;
    if (lineColors[index] == "black") {
      lineColors[index] = item.getAttribute("data-color");
      // lineColors[index] = window
      //   .getComputedStyle(item, null)
      //   .getPropertyValue("border-top-color");
    }
    t = 1;
    context.shadowColor = "#D8CFCF";
    context.shadowBlur = 14;
    context.shadowOffsetX = 0;
    context.shadowOffsetY = 1;
    context.lineWidth = 5;
    context.strokeStyle = lineColors[index];
    animate(window["points" + index], index);
    // drawLine(lineColors[index], window["line" + index]);
    // isDrawed[index] = 1;
  } else {
    isDrawed[index] = 0;
    context.clearRect(0, 0, canvas.width, canvas.height);
    drawGrid();
    for (let i = 0; i < 9; i++) {
      if (isDrawed[i]) {
        drawLine(lineColors[i], window["line" + i]);
      }
    }
    drawing = false;
    t = window["points" + index].length;
  }
}

function drawLine(style, line) {
  context.beginPath();
  context.shadowColor = "#D8CFCF";
  context.shadowBlur = 14;
  context.shadowOffsetX = 0;
  context.shadowOffsetY = 1;
  context.lineWidth = 5;
  context.strokeStyle = style;
  context.moveTo(line[0][0] * scaling, height - line[0][1] * scaling);
  for (let index = 1; index < line.length; index++) {
    context.lineTo(line[index][0] * scaling, height - line[index][1] * scaling);
  }
  context.stroke();
}

function FixBotoomBlock() {
  var width = window.innerWidth || document.documentElement.clientWidth;
  var mainContent = document.querySelector(".main-content");
  if (width > 800) {
    mainContent.style.marginTop = 0;
    return;
  }
  if (window.scrollY > 0) return;
  var height = window.innerHeight || document.documentElement.clientHeight;
  console.log(height);
  var rect = mainContent.getBoundingClientRect();
  console.log(rect.top);
  console.log(mainContent.style.marginTop);
  if (rect.top < height)
    mainContent.style.marginTop =
      +mainContent.style.marginTop.replace("px", "") + height - rect.top + "px";
}

var tabs = document.querySelectorAll(".tabs > li");
var tabsContent = document.querySelectorAll(".tabs-content > li");

Array.from(tabs).forEach(function (item, index) {
  item.addEventListener("click", function (e) {
    if (item.classList.contains("active")) return;
    e.preventDefault();
    Array.from(tabs).forEach(function (item2) {
      item2.classList.remove("active");
    });
    Array.from(tabsContent).forEach(function (item2) {
      item2.classList.remove("active");
    });
    item.classList.add("active");
    tabsContent[index].classList.add("active");
  });
});

// var mainNavLi = document.querySelectorAll(".main_nav li");
// Array.from(mainNavLi).forEach(function (item, index) {
//   item.addEventListener("click", function (e) {
//     e.preventDefault();
//     Array.from(mainNavLi).forEach(function (item2) {
//       item2.classList.remove("active");
//     });
//     item.classList.add("active");
//   });
// });

var buttonsLi = document.querySelectorAll(".buttons button");
Array.from(buttonsLi).forEach(function (item, index) {
  item.addEventListener("click", function (e) {
    e.preventDefault();
    if (drawing) return;
    item.classList.toggle("active");
    reDrawLine(item, index);
  });
});

function clickButton1() {
  buttonsLi[0].click();
}

// function GetLinesColors() {
//   Array.from(buttonsLi).forEach(function (item, index) {
//     lineColors[index] = window
//       .getComputedStyle(item, null)
//       .getPropertyValue("border-top-color");
//     console.log(lineColors[index]);
//   });
// }

function SetProgress() {
  var valueProgress = document.querySelectorAll(".value-progress");
  Array.from(valueProgress).forEach(function (item, index) {
    item.style.width = item.getAttribute("data-width");
  });
}

window.addEventListener("load", FixBotoomBlock, false);
// window.addEventListener("load", GetLinesColors, false);
window.addEventListener("load", drawGrid, false);
window.addEventListener("load", clickButton1, false);
window.addEventListener("load", SetProgress, false);
window.addEventListener("resize", FixBotoomBlock, false);
